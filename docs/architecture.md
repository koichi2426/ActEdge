```markdown
# ActEdge – 軽量リアルタイム行動選択エンジン

ユーザーの環境・ペルソナ・発言から、**今この瞬間に最も適した行動（メソッド）** をリアルタイムに選択する、モバイル・組み込み対応の軽量推論エンジン。

---

## ■ 目的

ユーザーの **環境情報**、**ペルソナ情報**、および **発言情報** をもとに、与えられた複数の候補メソッドから、**「今この瞬間に最も適した行動（メソッド）」** をリアルタイムに選択・実行する軽量分岐エンジンを構築します。

本エンジンは、モバイル・組み込み環境でも稼働可能な構成とし、**瞬間的な潜在ニーズ（momentary latent needs）** への即応を重視しています。

---

## ■ 入出力仕様

| 種類   | 内容例 |
|--------|--------|
| 入力① | 環境情報：時間帯、場所、周囲音、照明、温湿度、使用中のデバイスなど |
| 入力② | ペルソナ情報：年齢、性格、生活習慣、疲労度、目的、嗜好など |
| 入力③ | 発言情報：自然言語の発話・入力（例：「なんか疲れた」「あと5分で会議」） |
| 入力④ | 候補メソッド群：RelaxMusic, SuggestBreak, NotifyHydration, LaunchFocusApp など |
| 出力   | 最適なメソッド（1つ）とその理由（スコア・根拠付き） |

---

## ■ コア処理構造（Decision Engine）

### 1. 条件照合層（Rule-based Filter）

- ハード条件により不適合なメソッドを除外
  - 例：「深夜に運動は不可」「外出中は室内デバイス操作不可」

### 2. 発言解析層（NLU Analysis Layer）

- 発言を解析し、以下を抽出：
  - **意図（Intent）**：集中したい、休みたい、移動したいなど
  - **感情（Emotion）**：疲労、ストレス、苛立ちなど
  - **緊急度（Urgency）**：時間制約の有無、要望の明示性
- 使用モデル：DistilBERT / MiniLM / SVM＋辞書ルール

### 3. 行動予測層（Intent Estimation）

- 環境・ペルソナ・発言情報を統合し、ユーザーが次に取りたい行動を予測
  - 例：「休息」「集中」「移動」「水分補給」など
- モデル構成：SVM / RandomForest / ルール併用

### 4. 適合度評価層（Method-Intent Matching）

- 各候補メソッドと予測された意図との適合度を評価
  - 行動類似度、嗜好一致度、干渉リスクなどをスコア化

### 5. スコア統合層（Multi-Factor Scoring）

- 総合スコア = 以下指標の加重平均で決定

| 指標             | 内容 |
|------------------|------|
| 満足度（Utility） | 期待される快適性・効果 |
| 緊急度（Urgency） | 発言や状況の即時性ニーズ |
| 干渉度（Interruption Risk） | 現在のタスクや環境への影響度 |
| 実行コスト       | 時間・バッテリ・認知負荷など |

---

## ■ 特徴と強み

- ✅ **発言対応型**：発言から一時的な心理・意図・ニーズを抽出し即反映
- ✅ **モジュール型設計**：各層が独立しており、交換・拡張が容易
- ✅ **軽量推論**：SVM・RandomForest・小型NNで構成、エッジ端末でも高速動作
- ✅ **説明可能性**：なぜその行動を選んだかを理由付きで出力可能
- ✅ **拡張性**：新メソッド・新ルール・新スコアの追加が容易

---

## ■ ユースケース例

| 状況 | 発言 | 推奨メソッド |
|------|------|--------------|
| 深夜＋疲労＋静寂 | 「今日はもう無理かも…」 | `SuggestBreak` |
| 午後＋集中環境 | 「あと30分で資料を仕上げたい」 | `LaunchFocusApp` |
| 夏＋高温＋屋内 | 「喉乾いてないけど、ちょっと頭がぼーっとする」 | `NotifyHydration` |
| 通勤中＋騒音環境 | 「静かにしてほしいな…」 | `PlayCalmMusic` |
| 夕方＋運動不足 | 「そろそろ身体が重くなってきた」 | `SuggestStretching` |

---

## ■ データ仕様と学習方針

- **データ量**：3,000〜10,000件の履歴（発言・状態・選択メソッド）
- **特徴量構成**：
  - 環境情報（10項目）
  - ペルソナ情報（10項目）
  - 発言のエンベディング（BERT or SentenceTransformer）
- **学習モデル**：
  - LightNN、RandomForest、SVM、スコア加重ルールベース

---

## ■ リポジトリ構成

```

ActEdge/
├── README.md
├── LICENSE
├── requirements.txt
├── data/
│   ├── raw/
│   └── processed/
├── models/
│   ├── trained\_model.pkl
│   └── model.onnx
├── notebooks/
│   ├── train\_model.ipynb
│   └── evaluate\_model.ipynb
├── src/
│   ├── main.py
│   ├── config.py
│   ├── inference/
│   ├── parser/
│   ├── scoring/
│   ├── rules/
│   └── utils/
├── tests/
├── docs/

```

---

## ■ ライセンス

本プロジェクトは [MIT License](./LICENSE) のもとで公開されています。

---

## ■ 開発者

- 作成者: あなたのお名前
- GitHub: [github.com/yourname](https://github.com/yourname)
- 連絡先: your.email@example.com
```